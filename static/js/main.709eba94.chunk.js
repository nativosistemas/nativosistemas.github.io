(this.webpackJsonpappdk=this.webpackJsonpappdk||[]).push([[0],{22:function(e,a,t){e.exports=t(34)},27:function(e,a,t){},28:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(19),i=t.n(o),c=(t(27),t(28),t(12)),l=t(1),s=t(20),d=t(5),m=t(6),u=t(10),f=t(8),p=t(7),h=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).state={name:"",password:"",loginErrors:""},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n}return Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var a=this.state,t=a.name,n=a.password,r={};r.login=t,r.pass=n;var o=JSON.stringify(r);fetch("http://www.kellerhoff.com.ar:84/api/Authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then((function(e){return e.json()})).then((function(e){alert("OK"+e.apNombre)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Inicio sesion"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{type:"text",name:"user",className:"form-control",placeholder:"Ingrese usuario",value:this.state.user,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Ingrese contrase\xf1a",value:this.state.password,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Remember me"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Login")))}}]),t}(n.Component),g=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).refrescarCantidad=function(){var e=n.props.getCantidad(n.props.modulo);n.setState({count:e})},n.onClickAccion=function(e,a){e.preventDefault();var t=n.state.count;if(0===t&&-1===a)return null;t+=a,n.setState({count:t},(function(){n.props.setCantidad(n.props.modulo,t)}))},n.FormatoDecimalConDivisorMiles=function(e){var a=e,t=!1;if(e){-1!==e.toString().indexOf("-")&&(t=!0);var n=e.toString().replace("-","").split(".");if(n.length>0){n[0].length;for(var r="",o=n[0];o.length>3;)r="."+o.substr(o.length-3)+r,o=o.substring(0,o.length-3);r=o+r,a=void 0==n[1]?r:r+","+n[1]}t&&(a="-"+a)}return a},n.currencyFormat=function(e){return"$"+n.FormatoDecimalConDivisorMiles(e)},n.state={count:0},n}return Object(m.a)(t,[{key:"render",value:function(){var e=this,a=this.props.modulo.moduloDetalle;return r.a.createElement("div",{className:"card cardModulo"},r.a.createElement("div",{className:"card-body"},a.length>0&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Producto"),r.a.createElement("th",{scope:"col"},"Descripci\xf3n"),r.a.createElement("th",{scope:"col"},"Precio"),r.a.createElement("th",{scope:"col"},"Precio c/ Desc."),r.a.createElement("th",{scope:"col"},"Cant. Unid."))),r.a.createElement("tbody",null,a.map((function(a,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,a.producto),r.a.createElement("td",null,a.descripcion),r.a.createElement("td",null,e.currencyFormat(a.precio)),r.a.createElement("td",null,e.currencyFormat(a.precioDescuento)),r.a.createElement("td",null,a.cantidadUnidades))}))))),r.a.createElement("div",{className:"card-footer "},r.a.createElement("div",{className:" row justify-content-center"},r.a.createElement("div",{className:"input-group col-xs-6 col-sm-6 col-md-3 col-lg-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(a){return e.onClickAccion(a,-1)}},"-")),r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Cantidad",value:this.state.count,readOnly:!0}),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(a){return e.onClickAccion(a,1)}},"+"))))))}}]),t}(n.Component),E=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).componentWillMount=function(){e.miMapaRefs=new Map,e.props.modulos.forEach((function(a){e.miMapaRefs.set(a.id,r.a.createRef())}))},e.componentWillUpdate=function(){e.miMapaRefs=new Map,e.props.modulos.forEach((function(a){e.miMapaRefs.set(a.id,r.a.createRef())}))},e.actualizarCantidadEnLosModulos=function(){e.miMapaRefs.forEach((function(e){e.current.refrescarCantidad()}))},e.setCantidad=function(a,t){var n=e.props.farmacia;if(""!==n){var r=localStorage.getItem("l_pedidos")||"",o=!0;if(""!==r&&(r=JSON.parse(r)),Array.isArray(r)){for(var i=0;i<r.length;i++)if(r[i].modulo.id===a.id&&r[i].farmacia.id===n.id){o=!1,r[i].cantidad=t;break}}else r=[];if(o){var c={fechaCreacion:Date.now(),farmacia:n,modulo:a,cantidad:t};r.push(c)}localStorage.setItem("l_pedidos",JSON.stringify(r))}},e.getCantidad=function(a){var t=0,n=e.props.farmacia;if(""===n)return t;var r=localStorage.getItem("l_pedidos")||"";if(""!==r&&(r=JSON.parse(r),Array.isArray(r)))for(var o=0;o<r.length;o++)if(String(r[o].modulo.id)===String(a.id)&&String(r[o].farmacia.id)===String(n.id)){t=r[o].cantidad;break}return t},e}return Object(m.a)(t,[{key:"render",value:function(){var e=this,a=this.props.modulos;return 0===a.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,a.map((function(a){return r.a.createElement(g,{key:a.id,id:a.id,ref:e.miMapaRefs.get(a.id),modulo:a,setCantidad:e.setCantidad,getCantidad:e.getCantidad})}))))}}]),t}(n.Component);var v=function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-light bg-gradient-info"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=a.current.value;e.filtrarModulosApp(n)}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Farmacia"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{className:"form-control ",onChange:e.handleChange},r.a.createElement("option",{disabled:!0,selected:!0,value:"0"}," -- seleccione una opci\xf3n -- "),e.farmacias.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},String(e.id)+" - "+e.nombre)}))))),r.a.createElement("div",{className:"form-inline"},r.a.createElement("input",{ref:a,className:"form-control mr-sm-2 inputUppercase",type:"search",placeholder:"Filtro","aria-label":"Filtro"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Busqueda")))))},b=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).cargarDatosInicio_DesdeApi=function(){fetch(n.url+"farmacia?"+new URLSearchParams({ApNombre:"Perez, Nestor"})).then((function(e){return e.json()})).then((function(e){localStorage.setItem("l_farmacias",JSON.stringify(e))})).then((function(){return fetch(n.url+"modulo").then((function(e){return e.json()})).then((function(e){localStorage.setItem("l_modulos",JSON.stringify(e))}))})).then((function(){n.cargarDatosInicio_DesdeLocalStorage()})).catch((function(e){n.cargarDatosInicio_DesdeLocalStorage()}))},n.cargarDatosInicio_DesdeLocalStorage=function(){var e=localStorage.getItem("l_farmacias")||"";""!==e&&(e=JSON.parse(e)),Array.isArray(e)||(e=[]),n.setState({farmacias:e.slice(0,50)});var a=localStorage.getItem("l_modulos")||"";""!==a&&(a=JSON.parse(a)),Array.isArray(a)||(a=[]),n.setState({modulosOriginal:a.slice(0,100)},(function(){n.filtrarModulosApp("")}))},n.filtrarModulosApp=function(e){n.setState({filtrado:e},(function(){if(""===n.state.filtrado)n.setState({modulos:n.state.modulosOriginal});else{var e=n.state.modulosOriginal.filter((function(e){return void 0!==e.moduloDetalle.find((function(e){return String(e.producto).toUpperCase().includes(String(n.state.filtrado).toUpperCase())}))}));n.setState({modulos:e})}}))},n.state={modulosOriginal:[{id:1,cantidadMinimos:2,idLaboratorio:1,laboratorio:null,moduloDetalle:[{id:1,idModulo:1,orden:1,producto:"COLBERT US DEO AER X 250 ML",descripcion:"COLBERT US DEO AER X 250 ML",precio:159.24,precioDescuento:150.24,cantidadUnidades:2},{id:2,idModulo:1,orden:2,producto:"MB FITME BASE N\xba 118 X 30ML",descripcion:"MB FITME BASE N\xba 118 X 30ML",precio:423.45,precioDescuento:403,cantidadUnidades:1}]},{id:2,cantidadMinimos:1,idLaboratorio:2,laboratorio:null,moduloDetalle:[{id:10,idModulo:2,orden:1,producto:"ARCELIGASOL CAP BLANDAS X 60",descripcion:"VOGUE LAB C. MANIAC MATTE ELECTRICA",precio:15024,precioDescuento:2,cantidadUnidades:0},{id:11,idModulo:2,orden:2,producto:"GOICOECHEA CR ULTRA NUTRITIVA X 400 ML",descripcion:"REQUIP PD 8 MG CPR X 28",precio:40300,precioDescuento:1,cantidadUnidades:0}]}],modulos:[],farmacias:[{id:289,nombre:"AGUIRRE LAURA MARIA",direccion:"AV. FILIPPINI 1872"},{id:5688,nombre:"AIRES DE LORENZETTI MAURICIO",direccion:"BUENOS AIRES 2296"},{id:7620,nombre:"ALEMANA DE LOPERGOLO V. Y CORDEIRO M. S.",direccion:"RIOBAMBA 1814"},{id:1050,nombre:"ALESSO ANDREA",direccion:"SARMIENTO 1296"},{id:5823,nombre:"ALQUIMIA DE DANIEL MARTIN",direccion:"CORRIENTES 2670"},{id:2733,nombre:"AMEN FARMACIA MUTUAL",direccion:"CORRIENTES 370"},{id:4294,nombre:"APOTHEKA SRL",direccion:"SAN JERONIMO 248 LOCAL 4"},{id:1255,nombre:"ARGENTA ETEL",direccion:"SAN MARTIN 4515"},{id:2777,nombre:"ARGUTTI MIRTHA",direccion:"JUAN B JUSTO 371"},{id:1256,nombre:"ASOC ESPA\xd1OLA ROSARIO",direccion:"ENTRE RIOS 701"},{id:7619,nombre:"ASOC MUTUAL 12 DE MAYO - ROSARIO",direccion:"MAIPU 1157"}],farmaciaSeleccionada:"",filtrado:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.elementResultadoModulo=r.a.createRef(),n.url="http://www.kellerhoff.com.ar:84/api/",n}return Object(m.a)(t,[{key:"componentWillMount",value:function(){this.cargarDatosInicio_DesdeLocalStorage(),navigator.onLine}},{key:"handleChange",value:function(e){var a=this,t=this.state.farmacias.find((function(a){return String(a.id)===String(e.target.value)}));this.setState({farmaciaSeleccionada:t},(function(){a.elementResultadoModulo.current.actualizarCantidadEnLosModulos()}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app container-fluid"},r.a.createElement(v,{handleChange:this.handleChange,filtrarModulosApp:this.filtrarModulosApp,farmacias:this.state.farmacias,farmacia:this.state.farmaciaSeleccionada}),r.a.createElement(E,{ref:this.elementResultadoModulo,modulos:this.state.modulos,farmacia:this.state.farmaciaSeleccionada})))}}]),t}(n.Component),N=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(d.a)(this,t),(n=a.call(this,e)).l_farmaciaModulos_array=[],n.pedidosFarmaciasRefs=new Map;var o=localStorage.getItem("l_pedidos")||"";return""!==o&&(o=JSON.parse(o)),Array.isArray(o)||(o=[]),o.forEach((function(e){for(var a=!0,t=0;t<n.l_farmaciaModulos_array.length;t++)if(n.l_farmaciaModulos_array[t].farmacia.id===e.farmacia.id){n.l_farmaciaModulos_array[t].modulos.push(e.modulo),a=!1;break}if(a){var r=[];r.push(e.modulo);var o={farmacia:e.farmacia,modulos:r};n.l_farmaciaModulos_array.push(o)}})),n.l_farmaciaModulos_array.forEach((function(e){n.pedidosFarmaciasRefs.set(e.farmacia.id,r.a.createRef())})),n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.pedidosFarmaciasRefs.forEach((function(e){e.current.actualizarCantidadEnLosModulos()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app container-fluid"},r.a.createElement("h2",null,r.a.createElement("p",{className:"text-center"},"Pedidos por farmacias")),r.a.createElement("div",{className:"float-right"},r.a.createElement("button",{className:"btn btn-success"},"Enviar Todos los Pedidos")),r.a.createElement("br",null),this.l_farmaciaModulos_array.map((function(a,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,String(a.farmacia.id)+" - "+a.farmacia.nombre),r.a.createElement(E,{key:t,ref:e.pedidosFarmaciasRefs.get(a.farmacia.id),modulos:a.modulos,farmacia:a.farmacia}),r.a.createElement("br",null),r.a.createElement("div",{className:"float-right"},r.a.createElement("button",{className:"btn btn-success"},"Enviar Pedido")))})))}}]),t}(n.Component),S=function(e){Object(f.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).cargarDatosInicio_DesdeApi=function(){fetch(n.url+"farmacia?"+new URLSearchParams({ApNombre:"Perez, Nestor"})).then((function(e){return e.json()})).then((function(e){localStorage.setItem("l_farmacias",JSON.stringify(e))})).then((function(){return fetch(n.url+"modulo").then((function(e){return e.json()})).then((function(e){localStorage.setItem("l_modulos",JSON.stringify(e))}))})).then((function(){n.cargarDatosInicio_DesdeLocalStorage()})).catch((function(e){n.cargarDatosInicio_DesdeLocalStorage()}))},n.cargarDatosInicio_DesdeLocalStorage=function(){var e=localStorage.getItem("l_farmacias")||"";""!==e&&(e=JSON.parse(e)),Array.isArray(e)||(e=[]),n.setState({farmacias:e.slice(0,50)});var a=localStorage.getItem("l_modulos")||"";""!==a&&(a=JSON.parse(a)),Array.isArray(a)||(a=[]),n.setState({modulosOriginal:a.slice(0,100)},(function(){n.filtrarModulosApp("")}))},n.filtrarModulosApp=function(e){n.setState({filtrado:e},(function(){if(""===n.state.filtrado)n.setState({modulos:n.state.modulosOriginal});else{var e=n.state.modulosOriginal.filter((function(e){return void 0!=e.moduloDetalle.find((function(e){return String(e.producto).toUpperCase().includes(String(n.state.filtrado).toUpperCase())}))}));n.setState({modulos:e})}}))},n.state={modulosOriginal:[],modulos:[],farmacias:[],farmaciaSeleccionada:"",filtrado:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.elementResultadoModulo=r.a.createRef(),n.url="http://www.kellerhoff.com.ar:84/api/",n}return Object(m.a)(t,[{key:"componentWillMount",value:function(){this.cargarDatosInicio_DesdeLocalStorage(),navigator.onLine&&this.cargarDatosInicio_DesdeApi()}},{key:"handleChange",value:function(e){var a=this,t=this.state.farmacias.find((function(a){return String(a.id)===String(e.target.value)}));this.setState({farmaciaSeleccionada:t},(function(){a.elementResultadoModulo.current.actualizarCantidadEnLosModulos()}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app container-fluid"},"Pedidos Historial",r.a.createElement("div",{className:"carousel slide","data-ride":"carousel"},r.a.createElement("div",{className:"carousel-inner"},r.a.createElement("div",{className:"carousel-item active"},r.a.createElement("img",{className:"d-block w-100",src:"https://i.blogs.es/2d9ac2/el-libro-de-imagenes-4/1366_2000.jpg",alt:"First slide"})),r.a.createElement("div",{className:"carousel-item"},r.a.createElement("img",{className:"d-block w-100",src:"https://i.blogs.es/372249/idees-vagues_images-claires_godard_chinoise/1366_2000.jpg",alt:"Second slide"})),r.a.createElement("div",{className:"carousel-item"},r.a.createElement("img",{className:"d-block w-100",src:"https://i.blogs.es/530af5/el-libro-de-imagenes-2/1366_2000.png",alt:"Third slide"}))),r.a.createElement("a",{className:"carousel-control-prev",href:"#carouselExampleControls",role:"button","data-slide":"prev"},r.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Previous")),r.a.createElement("a",{className:"carousel-control-next",href:"#carouselExampleControls",role:"button","data-slide":"next"},r.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Next")))))}}]),t}(n.Component);var A=function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"app container-fluid"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item ",activeClassName:"active"},r.a.createElement(c.b,{className:"nav-link",to:"/promociones"},"Promociones ",r.a.createElement("span",{class:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item ",activeClassName:"active"},r.a.createElement(c.b,{className:"nav-link",to:"/pedidos"},"Pedidos ")),r.a.createElement("li",{className:"nav-item",activeClassName:"active"},r.a.createElement(c.b,{className:"nav-link",to:"/pedidoshistorial"},"Historial de pedidos")),r.a.createElement("li",{className:"nav-item",activeClassName:"active"},r.a.createElement(c.b,{className:"nav-link",to:"/sign-in"},"Salir"))),r.a.createElement("span",{className:"navbar-text"},r.a.createElement("u",null," Promotor/a: "),"Juan Perez"))),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:h}),r.a.createElement(l.a,{path:"/sign-in",component:h}),r.a.createElement(l.a,{path:"/promociones",component:b}),r.a.createElement(l.a,{path:"/pedidos",component:N}),r.a.createElement(l.a,{path:"/pedidoshistorial",component:S}))))},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");O?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):C(a,e)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.709eba94.chunk.js.map